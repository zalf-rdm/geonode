{% extends 'geonode_base.html' %}
{% load i18n static %}
{% load bootstrap_tags %}
{% load thesaurus %}
{% load client_lib_tags %}
{% load sanitize_html %}

{% block title %}
  {{ resource.title }} â€” {{ block.super }}
{% endblock %}

{% block body_outer %}

<div class="metadata-title">
  <div class="page-header">
    <h2 class="page-title">
      <strong>{% trans "Metadata" %}:</strong> {{ resource.title }}
    </h2>
  </div>
</div>


<div class="metadata-tabs">

  <!-- Tabs (desktop) -->
  <ul class="nav nav-tabs hidden-xs" role="tablist">
    <li class="active"><a href="#tab-identification" data-toggle="tab">{% trans "Identification" %}</a></li>
    <li><a href="#tab-responsible" data-toggle="tab">{% trans "Responsible" %}</a></li>
    <li><a href="#tab-fundings" data-toggle="tab">{% trans "Fundings" %}</a></li>
    <li><a href="#tab-related" data-toggle="tab">{% trans "Related Identifiers" %}</a></li>
    <li><a href="#tab-features" data-toggle="tab">{% trans "Features" %}</a></li>
    <li><a href="#tab-references" data-toggle="tab">{% trans "References" %}</a></li>
    <li><a href="#tab-author" data-toggle="tab">{% trans "Metadata Author" %}</a></li>
  </ul>

  <!-- Accordion (mobile) -->
  <div class="panel-group visible-xs" id="accordion">

    <!-- Identification -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse-identification">{% trans "Identification" %}</a></h4>
      </div>
      <div id="collapse-identification" class="panel-collapse collapse in">
        <div class="panel-body">
          <dl class="dl-horizontal">
            <dt>{% trans "Title" %}</dt><dd>{{ resource.title }}</dd>
            <dt>{% trans "Publication Date" %}</dt><dd>{{ resource.date }}</dd>
            <dt>{% trans "Type" %}</dt><dd>{{ resource.display_type }}</dd>
            <dt>{% trans "Approved" %}</dt><dd>{{ resource.is_approved|yesno:_("Yes,No") }}</dd>
            <dt>{% trans "Published" %}</dt><dd>{{ resource.is_published|yesno:_("Yes,No") }}</dd>
            <dt>{% trans "Featured" %}</dt><dd>{{ resource.featured|yesno:_("Yes,No") }}</dd>
            <dt>{% trans "DOI" %}</dt><dd>{{ resource.doi|default:"-" }}</dd>
            <dt>{% trans "Attribution" %}</dt><dd>{{ resource.attribution|default:"-" }}</dd>
          </dl>
        </div>
      </div>
    </div>

    <!-- Responsible -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse-responsible">{% trans "Responsible" %}</a></h4>
      </div>
      <div id="collapse-responsible" class="panel-collapse collapse">
        <div class="panel-body">
          <dl class="dl-horizontal">
            <dt>{% trans "Name" %}</dt><dd>{{ resource.owner }}</dd>
            <dt>{% trans "Email" %}</dt><dd>{{ resource.owner.email }}</dd>
            <dt>{% trans "Organization" %}</dt><dd>{{ resource.owner.organization|default:"-" }}</dd>
          </dl>
        </div>
      </div>
    </div>

    <!-- Fundings -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse-fundings">{% trans "Fundings" %}</a></h4>
      </div>
      <div id="collapse-fundings" class="panel-collapse collapse">
        <div class="panel-body">
          {% for funding in resource.fundings.all %}
          <dl class="dl-horizontal">
            <dt>{% trans "Organization" %}</dt><dd>{{ funding.organization }}</dd>
            <dt>{% trans "Award Number" %}</dt><dd>{{ funding.award_number }}</dd>
            <dt>{% trans "Award URI" %}</dt><dd>{{ funding.award_uri }}</dd>
            <dt>{% trans "Award Title" %}</dt><dd>{{ funding.award_title }}</dd>
          </dl>
          <hr>
          {% empty %}
          <p><em>{% trans "No fundings available." %}</em></p>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Related Identifiers -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse-related">{% trans "Related Identifiers" %}</a></h4>
      </div>
      <div id="collapse-related" class="panel-collapse collapse">
        <div class="panel-body">
          {% if resource.related_identifier.exists %}
            {% for rel in resource.related_identifier.all %}
            <dl class="dl-horizontal">
              <dt>{% trans "Relation Identifier" %}</dt><dd>{{ rel.related_identifier }}</dd>
              <dt>{% trans "Related Identifier Type" %}</dt><dd>{{ rel.related_identifier_type }}</dd>
              <dt>{% trans "Relation Type" %}</dt><dd>{{ rel.relation_type }}</dd>
              <dt>{% trans "Description" %}</dt><dd>{{ rel.description }}</dd>
            </dl>
            <hr>
            {% endfor %}
          {% else %}
            <p><em>{% trans "No related identifiers available." %}</em></p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Features -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse-features">{% trans "Features" %}</a></h4>
      </div>
      <div id="collapse-features" class="panel-collapse collapse">
        <div class="panel-body">
          <dl class="dl-horizontal">
            <dt>{% trans "Projection System" %}</dt><dd>{{ resource.srid|default:"-" }}</dd>
            <dt>{% trans "Spatial Extent" %}</dt><dd>{{ resource.bbox_string|default:"-" }}</dd>
            <dt>{% trans "Language" %}</dt><dd>{{ resource.language|default:"-" }}</dd>
          </dl>
        </div>
      </div>
    </div>

    <!-- References -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse-references">{% trans "References" %}</a></h4>
      </div>
      <div id="collapse-references" class="panel-collapse collapse">
        <div class="panel-body">
          <dl class="dl-horizontal">
            <dt>{% trans "Link Online" %}</dt>
            <dd><a href="{{ resource.detail_url }}">{{ resource.detail_url }}</a></dd>
            <dt>{% trans "Metadata Page" %}</dt>
            <dd><a href="{{ resource.detail_url }}metadata_detail">{{ resource.detail_url }}metadata_detail</a></dd>
          </dl>
        </div>
      </div>
    </div>

    <!-- Metadata Author -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse-author">{% trans "Metadata Author" %}</a></h4>
      </div>
      <div id="collapse-author" class="panel-collapse collapse">
        <div class="panel-body">
          <dl class="dl-horizontal">
            <dt>{% trans "Name" %}</dt><dd>{{ resource.owner }}</dd>
            <dt>{% trans "Email" %}</dt><dd>{{ resource.owner.email }}</dd>
            <dt>{% trans "Organization" %}</dt><dd>{{ resource.owner.organization|default:"-" }}</dd>
          </dl>
        </div>
      </div>
    </div>

  </div>

  <!-- Desktop tab content -->
  <div class="tab-content hidden-xs">
    <!-- Identification -->
    <div class="tab-pane active" id="tab-identification">
      <dl class="dl-horizontal">
        <dt>{% trans "Title" %}</dt><dd>{{ resource.title }}</dd>
        <dt>{% trans "Abstract" %}</dt><dd>{{ resource.abstract }}</dd>
        <dt>{% trans "Publication Data" %}</dt><dd>{{ resource.date_created }}</dd>
        <dt>{% trans "Publication Accepted" %}</dt><dd>{{ resource.date_accepted }}</dd>
        <dt>{% trans "Publication Available" %}</dt><dd>{{ resource.date_available }}</dd>
        <dt>{% trans "Type" %}</dt><dd>{{ resource.display_type }}</dd>
        <dt>{% trans "Approved" %}</dt><dd>{{ resource.is_approved|yesno:_("Yes,No") }}</dd>
        <dt>{% trans "Published" %}</dt><dd>{{ resource.is_published|yesno:_("Yes,No") }}</dd>
        <dt>{% trans "Featured" %}</dt><dd>{{ resource.featured|yesno:_("Yes,No") }}</dd>
        <dt>{% trans "DOI" %}</dt><dd>{{ resource.doi|default:"-" }}</dd>
        <dt>{% trans "Attribution" %}</dt><dd>{{ resource.attribution|default:"-" }}</dd>
      </dl>
    </div>

    <!-- Responsible -->
    <div class="tab-pane" id="tab-responsible">
      
      <dl class="dl-horizontal">
        <h3>{% trans "Responsible" %}</h3>
        <dt>{% trans "Name" %}</dt><dd>{{ resource.owner }}</dd>
        <dt>{% trans "Email" %}</dt><dd>{{ resource.owner.email }}</dd>
        <dt>{% trans "Organization" %}</dt><dd>{{ resource.owner.organization|default:"-" }}</dd>
      </dl>
      <dl class="dl-horizontal">
        <h3>{% trans "Contact Point" %}</h3>
        <dt>{% trans "Name" %}</dt><dd>{{ resource.owner }}</dd>
        <dt>{% trans "Email" %}</dt><dd>{{ resource.owner.email }}</dd>
        <dt>{% trans "Organization" %}</dt><dd>{{ resource.owner.organization|default:"-" }}</dd>
      </dl>
      <dl class="dl-horizontal">
        <h3>{% trans "Metada Author" %}</h3>
        <dt>{% trans "Name" %}</dt><dd>{{ resource.owner }}</dd>
        <dt>{% trans "Email" %}</dt><dd>{{ resource.owner.email }}</dd>
        <dt>{% trans "Organization" %}</dt><dd>{{ resource.owner.organization|default:"-" }}</dd>
      </dl>
    </div>

    <!-- Fundings -->
    <div class="tab-pane" id="tab-fundings">
      {% for funding in resource.fundings.all %}
      <dl class="dl-horizontal">
        <dt>{% trans "Organization" %}</dt><dd>{{ funding.organization }}</dd>
        <dt>{% trans "Award Number" %}</dt><dd>{{ funding.award_number }}</dd>
        <dt>{% trans "Award URI" %}</dt><dd>{{ funding.award_uri }}</dd>
        <dt>{% trans "Award Title" %}</dt><dd>{{ funding.award_title }}</dd>
      </dl>
      <hr>
      {% empty %}
      <p><em>{% trans "No fundings available." %}</em></p>
      {% endfor %}
    </div>

    <!-- Related Identifiers -->
    <div class="tab-pane" id="tab-related">
      {% if resource.related_identifier.exists %}
        {% for rel in resource.related_identifier.all %}
        <dl class="dl-horizontal">
          <dt>{% trans "Relation Identifier" %}</dt><dd>{{ rel.related_identifier }}</dd>
          <dt>{% trans "Related Identifier Type" %}</dt><dd>{{ rel.related_identifier_type }}</dd>
          <dt>{% trans "Relation Type" %}</dt><dd>{{ rel.relation_type }}</dd>
          <dt>{% trans "Description" %}</dt><dd>{{ rel.description }}</dd>
        </dl>
        <hr>
        {% endfor %}
      {% else %}
        <p><em>{% trans "No related identifiers available." %}</em></p>
      {% endif %}
    </div>
    <!-- GeoInformation -->
    <div class="tab-pane" id="tab-features">
      <dl class="dl-horizontal">
        <h3>{% trans "GeoInformation" %}</h3>
        
        <dt>{% trans "Identification Image" %}</dt><dd>{{ resource.image|default:"-" }}</dd>
        <dt>{% trans "Projection System" %}</dt><dd>{{ resource.srid|default:"-" }}</dd>
        <dt>{% trans "Spatial Extent" %}</dt><dd>{{ resource.bbox_string|default:"-" }}</dd>
        <dt>{% trans "Projection System" %}</dt><dd>{{ resource.srid|default:"-" }}</dd>
        <dt>{% trans "Spatial Extent" %}</dt><dd>{{ resource.bbox_string|default:"-" }}</dd>
        <dt>{% trans "Language" %}</dt><dd>{{ resource.language|default:"-" }}</dd>
      </dl>
    </div>

    <!-- Features -->
    <div class="tab-pane" id="tab-features">
      <dl class="dl-horizontal">
        <dt>{% trans "Projection System" %}</dt><dd>{{ resource.srid|default:"-" }}</dd>
        <dt>{% trans "Spatial Extent" %}</dt><dd>{{ resource.bbox_string|default:"-" }}</dd>
        <dt>{% trans "Language" %}</dt><dd>{{ resource.language|default:"-" }}</dd>
      </dl>
    </div>

    <!-- References -->
    <div class="tab-pane" id="tab-references">
      <dl class="dl-horizontal">
        <dt>{% trans "Link Online" %}</dt>
        <dd><a href="{{ resource.detail_url }}">{{ resource.detail_url }}</a></dd>
        <dt>{% trans "Metadata Page" %}</dt>
        <dd><a href="{{ resource.detail_url }}metadata_detail">{{ resource.detail_url }}metadata_detail</a></dd>
      </dl>
    </div>

    <!-- Metadata Author -->
    <div class="tab-pane" id="tab-author">
      <dl class="dl-horizontal">
        <dt>{% trans "Name" %}</dt><dd>{{ resource.owner }}</dd>
        <dt>{% trans "Email" %}</dt><dd>{{ resource.owner.email }}</dd>
        <dt>{% trans "Organization" %}</dt><dd>{{ resource.owner.organization|default:"-" }}</dd>
      </dl>
    </div>
  </div>

</div>

{% endblock %}

{% block extra_head %}
{{ block.super }}
  <link rel="stylesheet" href="{% static 'geonode/css/zalf_theme_metadata.css' %}">
{% endblock %}

{% block extra_script %}
<script>
  $(document).ready(function() {
    $('.panel-collapse').on('show.bs.collapse', function () {
      $(this).siblings('.panel-heading').addClass('active');
    }).on('hide.bs.collapse', function () {
      $(this).siblings('.panel-heading').removeClass('active');
    });
  });
</script>
{% endblock %}
